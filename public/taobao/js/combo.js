!function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n||e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){function o(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){n.shift()()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],2:[function(e,t,n){"use strict";function o(e){function t(e){return null===u?void l.push(e):void s(function(){var t=u?e.onFulfilled:e.onRejected;if(null===t)return void(u?e.resolve:e.reject)(c);var n;try{n=t(c)}catch(t){return void e.reject(t)}e.resolve(n)})}function n(e){try{if(e===p)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void r(t.bind(e),n,o)}u=!0,c=e,a()}catch(e){o(e)}}function o(e){u=!1,c=e,a()}function a(){for(var e=0,n=l.length;n>e;e++)t(l[e]);l=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var u=null,c=null,l=[],p=this;this.then=function(e,n){return new p.constructor(function(o,r){t(new i(e,n,o,r))})},r(e,n,o)}function i(e,t,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=o}function r(e,t,n){var o=!1;try{e(function(e){o||(o=!0,t(e))},function(e){o||(o=!0,n(e))})}catch(e){if(o)return;o=!0,n(e)}}var s=e("asap");t.exports=o},{asap:4}],3:[function(e,t,n){"use strict";function o(e){this.then=function(t){return"function"!=typeof t?this:new i(function(n,o){r(function(){try{n(t(e))}catch(e){o(e)}})})}}var i=e("./core.js"),r=e("asap");t.exports=i,o.prototype=i.prototype;var s=new o(!0),a=new o(!1),u=new o(null),c=new o(void 0),l=new o(0),p=new o("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return u;if(void 0===e)return c;if(!0===e)return s;if(!1===e)return a;if(0===e)return l;if(""===e)return p;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return new o(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function o(r,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){o(r,e)},n)}t[r]=s,0==--i&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var i=t.length,r=0;r<t.length;r++)o(r,t[r])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},{"./core.js":2,asap:4}],4:[function(e,t,n){(function(e){function n(){for(;i.next;){i=i.next;var e=i.task;i.task=void 0;var t=i.domain;t&&(i.domain=void 0,t.enter());try{e()}catch(e){if(u)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),e;setTimeout(function(){throw e},0)}t&&t.exit()}s=!1}function o(t){r=r.next={task:t,domain:u&&e.domain,next:null},s||(s=!0,a())}var i={task:void 0,next:null},r=i,s=!1,a=void 0,u=!1;if(void 0!==e&&e.nextTick)u=!0,a=function(){e.nextTick(n)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=n,a=function(){c.port2.postMessage(0)}}else a=function(){setTimeout(n,0)};t.exports=o}).call(this,e("_process"))},{_process:1}],5:[function(e,t,n){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})})},{}],6:[function(e,t,n){e("asap"),"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":2,"./lib/es6-extensions.js":3,"./polyfill-done.js":5,asap:4}]},{},[6]),function(e,t){var n=e.Promise,o=e.document,i=e.navigator.userAgent,r=/Windows\sPhone\s(?:OS\s)?[\d\.]+/i.test(i)||/Windows\sNT\s[\d\.]+/i.test(i),s=r&&e.WindVane_Win_Private&&e.WindVane_Win_Private.call,a=/iPhone|iPad|iPod/i.test(i),u=/Android/i.test(i),c=i.match(/WindVane[\/\s](\d+[._]\d+[._]\d+)/),l=Object.prototype.hasOwnProperty,p=t.windvane=e.WindVane||(e.WindVane={}),d=(e.WindVane_Native,Math.floor(65536*Math.random())),f=1,h=[],m="iframe_",v="param_",g="chunk_";c=c?(c[1]||"0.0.0").replace(/\_/g,"."):"0.0.0";var w={isAvailable:1===function(e,t){e=e.toString().split("."),t=t.toString().split(".");for(var n=0;n<e.length||n<t.length;n++){var o=parseInt(e[n],10),i=parseInt(t[n],10);if(window.isNaN(o)&&(o=0),window.isNaN(i)&&(i=0),i>o)return-1;if(o>i)return 1}return 0}(c,"0"),call:function(e,t,o,i,r,s){var a,u;"number"==typeof arguments[arguments.length-1]&&(s=arguments[arguments.length-1]),"function"!=typeof i&&(i=null),"function"!=typeof r&&(r=null),n&&(u={},u.promise=new n(function(e,t){u.resolve=e,u.reject=t})),a=y.getSid();var c={success:i,failure:r,deferred:u};return s>0&&(c.timeout=setTimeout(function(){w.onFailure(a,{ret:"HY_TIMEOUT"})},s)),y.registerCall(a,c),y.registerGC(a,s),w.isAvailable?y.callMethod(e,t,o,a):w.onFailure(a,{ret:"HY_NOT_IN_WINDVANE"}),u?u.promise:void 0},fireEvent:function(e,t,n){var i=o.createEvent("HTMLEvents");i.initEvent(e,!1,!0),i.param=y.parseData(t||y.getData(n)),o.dispatchEvent(i)},getParam:function(e){return y.getParam(e)},setData:function(e,t){y.setData(e,t)},onSuccess:function(e,t){y.onComplete(e,t,"success")},onFailure:function(e,t){y.onComplete(e,t,"failure")}},y={params:{},chunks:{},calls:{},getSid:function(){return(d+f++)%65536+""},buildParam:function(e){return e&&"object"==typeof e?JSON.stringify(e):e||""},getParam:function(e){return this.params[v+e]||""},setParam:function(e,t){this.params[v+e]=t},parseData:function(e){var t;if(e&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){t={ret:["WV_ERR::PARAM_PARSE_ERROR"]}}else t=e||{};return t},setData:function(){this.chunks[g+sid]=this.chunks[g+sid]||[],this.chunks[g+sid].push(chunk)},getData:function(e){return this.chunks[g+e]?this.chunks[g+e].join(""):""},registerCall:function(e,t){this.calls[e]=t},unregisterCall:function(e){var t={};return this.calls[e]&&(t=this.calls[e],delete this.calls[e]),t},useIframe:function(e,t){var n=m+e,i=h.pop();i||(i=o.createElement("iframe"),i.setAttribute("frameborder","0"),i.style.cssText="width:0;height:0;border:0;display:none;"),i.setAttribute("id",n),i.setAttribute("src",t),i.parentNode||setTimeout(function(){o.body.appendChild(i)},5)},retrieveIframe:function(e){var t=m+e,n=o.querySelector("#"+t);h.length>=3?o.body.removeChild(n):h.indexOf(n)<0&&h.push(n)},callMethod:function(t,n,o,i){if(o=y.buildParam(o),r)s?e.WindVane_Win_Private.call(t,n,i,o):this.onComplete(i,{ret:"HY_NO_HANDLER_ON_WP"},"failure");else{var c="hybrid://"+t+":"+i+"/"+n+"?"+o;if(a)this.setParam(i,o),this.useIframe(i,c);else if(u){window.prompt(c,"wv_hybrid:")}else this.onComplete(i,{ret:"HY_NOT_SUPPORT_DEVICE"},"failure")}},registerGC:function(e,t){var n=this,o=Math.max(t||0,6e5),i=Math.max(t||0,6e4),r=Math.max(t||0,6e5);setTimeout(function(){n.unregisterCall(e)},o),a?setTimeout(function(){n.params[v+e]&&delete n.params[v+e]},i):u&&setTimeout(function(){n.chunks[g+e]&&delete n.chunks[g+e]},r)},onComplete:function(e,t,n){var o=this.unregisterCall(e),i=o.success,r=o.failure,s=o.deferred,c=o.timeout;c&&clearTimeout(c),t=t||this.getData(e),t=this.parseData(t);var l=t.ret;"string"==typeof l&&(t=t.value||t,t.ret||(t.ret=[l])),"success"===n?(i&&i(t),s&&s.resolve(t)):"failure"===n&&(r&&r(t),s&&s.reject(t)),a?(this.retrieveIframe(e),this.params[v+e]&&delete this.params[v+e]):u&&this.chunks[g+e]&&delete this.chunks[g+e]}};for(var _ in w)l.call(p,_)||(p[_]=w[_])}(window,window.lib||(window.lib={})),function(e,t){function n(){var e={},t=new f(function(t,n){e.resolve=t,e.reject=n});return e.promise=t,e}function o(e,t){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}function i(e){(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document).appendChild(e)}function r(e){var t=[];for(var n in e)e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function s(e){try{return e.toLowerCase().indexOf("lazada")>-1&&".com"!==e.substring(e.lastIndexOf("."))?(e.split(".")||[]).length<=3?e:e.split(".").slice(1).join("."):e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}catch(t){return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}}function a(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,o,i,r,s;return i=2147483648&e,r=2147483648&t,n=1073741824&e,o=1073741824&t,s=(1073741823&e)+(1073741823&t),n&o?2147483648^s^i^r:n|o?1073741824&s?3221225472^s^i^r:1073741824^s^i^r:s^i^r}function o(e,t,n){return e&t|~e&n}function i(e,t,n){return e&n|t&~n}function r(e,t,n){return e^t^n}function s(e,t,n){return t^(e|~n)}function a(e,i,r,s,a,u,c){return e=n(e,n(n(o(i,r,s),a),c)),n(t(e,u),i)}function u(e,o,r,s,a,u,c){return e=n(e,n(n(i(o,r,s),a),c)),n(t(e,u),o)}function c(e,o,i,s,a,u,c){return e=n(e,n(n(r(o,i,s),a),c)),n(t(e,u),o)}function l(e,o,i,r,a,u,c){return e=n(e,n(n(s(o,i,r),a),c)),n(t(e,u),o)}function p(e){var t,n,o="",i="";for(n=0;3>=n;n++)t=e>>>8*n&255,i="0"+t.toString(16),o+=i.substr(i.length-2,2);return o}var d,f,h,m,v,g,w,y,_,b=[];for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);128>o?t+=String.fromCharCode(o):o>127&&2048>o?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}(e),b=function(e){for(var t,n=e.length,o=n+8,i=(o-o%64)/64,r=16*(i+1),s=new Array(r-1),a=0,u=0;n>u;)t=(u-u%4)/4,a=u%4*8,s[t]=s[t]|e.charCodeAt(u)<<a,u++;return t=(u-u%4)/4,a=u%4*8,s[t]=s[t]|128<<a,s[r-2]=n<<3,s[r-1]=n>>>29,s}(e),g=1732584193,w=4023233417,y=2562383102,_=271733878,d=0;d<b.length;d+=16)f=g,h=w,m=y,v=_,g=a(g,w,y,_,b[d+0],7,3614090360),_=a(_,g,w,y,b[d+1],12,3905402710),y=a(y,_,g,w,b[d+2],17,606105819),w=a(w,y,_,g,b[d+3],22,3250441966),g=a(g,w,y,_,b[d+4],7,4118548399),_=a(_,g,w,y,b[d+5],12,1200080426),y=a(y,_,g,w,b[d+6],17,2821735955),w=a(w,y,_,g,b[d+7],22,4249261313),g=a(g,w,y,_,b[d+8],7,1770035416),_=a(_,g,w,y,b[d+9],12,2336552879),y=a(y,_,g,w,b[d+10],17,4294925233),w=a(w,y,_,g,b[d+11],22,2304563134),g=a(g,w,y,_,b[d+12],7,1804603682),_=a(_,g,w,y,b[d+13],12,4254626195),y=a(y,_,g,w,b[d+14],17,2792965006),w=a(w,y,_,g,b[d+15],22,1236535329),g=u(g,w,y,_,b[d+1],5,4129170786),_=u(_,g,w,y,b[d+6],9,3225465664),y=u(y,_,g,w,b[d+11],14,643717713),w=u(w,y,_,g,b[d+0],20,3921069994),g=u(g,w,y,_,b[d+5],5,3593408605),_=u(_,g,w,y,b[d+10],9,38016083),y=u(y,_,g,w,b[d+15],14,3634488961),w=u(w,y,_,g,b[d+4],20,3889429448),g=u(g,w,y,_,b[d+9],5,568446438),_=u(_,g,w,y,b[d+14],9,3275163606),y=u(y,_,g,w,b[d+3],14,4107603335),w=u(w,y,_,g,b[d+8],20,1163531501),g=u(g,w,y,_,b[d+13],5,2850285829),_=u(_,g,w,y,b[d+2],9,4243563512),y=u(y,_,g,w,b[d+7],14,1735328473),w=u(w,y,_,g,b[d+12],20,2368359562),g=c(g,w,y,_,b[d+5],4,4294588738),_=c(_,g,w,y,b[d+8],11,2272392833),y=c(y,_,g,w,b[d+11],16,1839030562),w=c(w,y,_,g,b[d+14],23,4259657740),g=c(g,w,y,_,b[d+1],4,2763975236),_=c(_,g,w,y,b[d+4],11,1272893353),y=c(y,_,g,w,b[d+7],16,4139469664),w=c(w,y,_,g,b[d+10],23,3200236656),g=c(g,w,y,_,b[d+13],4,681279174),_=c(_,g,w,y,b[d+0],11,3936430074),y=c(y,_,g,w,b[d+3],16,3572445317),w=c(w,y,_,g,b[d+6],23,76029189),g=c(g,w,y,_,b[d+9],4,3654602809),_=c(_,g,w,y,b[d+12],11,3873151461),y=c(y,_,g,w,b[d+15],16,530742520),w=c(w,y,_,g,b[d+2],23,3299628645),g=l(g,w,y,_,b[d+0],6,4096336452),_=l(_,g,w,y,b[d+7],10,1126891415),y=l(y,_,g,w,b[d+14],15,2878612391),w=l(w,y,_,g,b[d+5],21,4237533241),g=l(g,w,y,_,b[d+12],6,1700485571),_=l(_,g,w,y,b[d+3],10,2399980690),y=l(y,_,g,w,b[d+10],15,4293915773),w=l(w,y,_,g,b[d+1],21,2240044497),g=l(g,w,y,_,b[d+8],6,1873313359),_=l(_,g,w,y,b[d+15],10,4264355552),y=l(y,_,g,w,b[d+6],15,2734768916),w=l(w,y,_,g,b[d+13],21,1309151649),g=l(g,w,y,_,b[d+4],6,4149444226),_=l(_,g,w,y,b[d+11],10,3174756917),y=l(y,_,g,w,b[d+2],15,718787259),w=l(w,y,_,g,b[d+9],21,3951481745),g=n(g,f),w=n(w,h),y=n(y,m),_=n(_,v);return(p(g)+p(w)+p(y)+p(_)).toLowerCase()}function u(e){return"[object Object]"=={}.toString.call(e)}function c(e,t,n){var o=n||{};document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&\/:<-\[\]-}]/g,encodeURIComponent)+(o.domain?";domain="+o.domain:"")+(o.path?";path="+o.path:"")+(o.secure?";secure":"")+(o.httponly?";HttpOnly":"")}function l(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}function p(e,t,n){var o=new Date;o.setTime(o.getTime()-864e5);document.cookie=e+"=;path=/;domain=."+t+";expires="+o.toGMTString(),document.cookie=e+"=;path=/;domain=."+n+"."+t+";expires="+o.toGMTString()}function d(e){this.id=++y,this.params=o(e||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=v.slice(0)}var f=e.Promise,h=(f||{resolve:function(){}}).resolve();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var m={useJsonpResultType:!1,safariGoLogin:!0,useAlipayJSBridge:!1},v=[],g={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};(function(){var t=e.location.hostname;if(!t){var n=e.parent.location.hostname;n&&~n.indexOf("zebra.alibaba-inc.com")&&(t=n)}var o=["taobao.net","taobao.com","tmall.com","tmall.hk","alibaba-inc.com"],i=new RegExp("([^.]*?)\\.?((?:"+o.join(")|(?:").replace(/\./g,"\\.")+"))","i"),r=t.match(i)||[],s=r[2]||"taobao.com",a=r[1]||"m";"taobao.net"!==s||"x"!==a&&"waptest"!==a&&"daily"!==a?"taobao.net"===s&&"demo"===a?a="demo":"alibaba-inc.com"===s&&"zebra"===a?a="zebra":"waptest"!==a&&"wapa"!==a&&"m"!==a&&(a="m"):a="waptest";var u="h5api";"taobao.net"===s&&"waptest"===a&&(u="acs"),m.mainDomain=s,m.subDomain=a,m.prefix=u})(),function(){var t=e.navigator.userAgent,n=t.match(/WindVane[\/\s]([\d\.\_]+)/);n&&(m.WindVaneVersion=n[1]);var o=t.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);o&&(m.AliAppName=o[1],m.AliAppVersion=o[2])}();var w="AP"===m.AliAppName&&parseFloat(m.AliAppVersion)>=10.1;w&&10.1===parseFloat(m.AliAppVersion)&&parseInt(m.AliAppVersion.substr(5))<2&&(w=!1);var y=0;d.prototype.use=function(e){if(!e)throw new Error("middleware is undefined");return this.middlewares.push(e),this},d.prototype.__processRequestMethod=function(e){var t=this.params,n=this.options;"get"===t.type&&"jsonp"===t.dataType?n.getJSONP=!0:"get"===t.type&&"originaljsonp"===t.dataType?n.getOriginalJSONP=!0:"get"===t.type&&"json"===t.dataType?n.getJSON=!0:"post"===t.type&&(n.postJSON=!0),e()},d.prototype.__processRequestType=function(n){var o=this,i=this.params,r=this.options;if(!0===m.H5Request&&(r.H5Request=!0),!0===m.WindVaneRequest&&(r.WindVaneRequest=!0),!1===r.H5Request&&!0===r.WindVaneRequest){if(!w&&(!t.windvane||parseFloat(r.WindVaneVersion)<5.4))throw new Error("WINDVANE_NOT_FOUND::缺少WindVane环境");if(w&&!e.AlipayJSBridge)throw new Error("ALIPAY_NOT_READY::支付宝通道未准备好，支付宝请见 https://lark.alipay.com/mtbsdkdocs/mtopjssdkdocs/pucq6z")}else if(!0===r.H5Request)r.WindVaneRequest=!1;else if(void 0===r.WindVaneRequest&&void 0===r.H5Request&&(t.windvane&&parseFloat(r.WindVaneVersion)>=5.4?r.WindVaneRequest=!0:r.H5Request=!0,w))if(r.WindVaneRequest=r.H5Request=void 0,e.AlipayJSBridge)if(u(i.data))r.WindVaneRequest=!0;else try{u(JSON.parse(i.data))?r.WindVaneRequest=!0:r.H5Request=!0}catch(e){r.H5Request=!0}else r.H5Request=!0;var s=e.navigator.userAgent.toLowerCase();return s.indexOf("youku")>-1&&r.mainDomain.indexOf("youku.com")<0&&(r.WindVaneRequest=!1,r.H5Request=!0),r.mainDomain.indexOf("youku.com")>-1&&s.indexOf("youku")<0&&(r.WindVaneRequest=!1,r.H5Request=!0),n?n().then(function(){var e=r.retJson.ret;if(e instanceof Array&&(e=e.join(",")),!0===r.WindVaneRequest&&w&&r.retJson.error||!e||e.indexOf("PARAM_PARSE_ERROR")>-1||e.indexOf("HY_FAILED")>-1||e.indexOf("HY_NO_HANDLER")>-1||e.indexOf("HY_CLOSED")>-1||e.indexOf("HY_EXCEPTION")>-1||e.indexOf("HY_NO_PERMISSION")>-1){if(!w||!isNaN(r.retJson.error)||-1!==r.retJson.error.indexOf("FAIL_SYS_ACCESS_DENIED"))return w&&u(i.data)&&(i.data=JSON.stringify(i.data)),m.H5Request=!0,o.__sequence([o.__processRequestType,o.__processToken,o.__processRequestUrl,o.middlewares,o.__processRequest]);void 0===r.retJson.api&&void 0===r.retJson.v&&(r.retJson.api=i.api,r.retJson.v=i.v,r.retJson.ret=[r.retJson.error+"::"+r.retJson.errorMessage],r.retJson.data={})}}):void 0};var _="_m_h5_c",b="_m_h5_tk";d.prototype.__getTokenFromAlipay=function(){var t=n(),o=this.options,i=(e.navigator.userAgent,!!location.protocol.match(/^https?\:$/));return!0===o.useAlipayJSBridge&&!i&&w&&e.AlipayJSBridge&&e.AlipayJSBridge.call?e.AlipayJSBridge.call("getMtopToken",function(e){e&&e.token&&(o.token=e.token),t.resolve()},function(){t.resolve()}):t.resolve(),t.promise},d.prototype.__getTokenFromCookie=function(){var e=this.options;return e.CDR&&l(_)?e.token=l(_).split(";")[0]:e.token=e.token||l(b),e.token&&(e.token=e.token.split("_")[0]),f.resolve()},d.prototype.__waitWKWebViewCookie=function(t){var n=this.options;n.waitWKWebViewCookieFn&&n.H5Request&&e.webkit&&e.webkit.messageHandlers?n.waitWKWebViewCookieFn(t):t()},d.prototype.__processToken=function(e){var t=this,n=this.options;return this.params,n.token&&delete n.token,!0!==n.WindVaneRequest?h.then(function(){return t.__getTokenFromAlipay()}).then(function(){return t.__getTokenFromCookie()}).then(e).then(function(){var e=n.retJson,o=e.ret;if(o instanceof Array&&(o=o.join(",")),o.indexOf("TOKEN_EMPTY")>-1||!0===n.CDR&&o.indexOf("ILLEGAL_ACCESS")>-1||o.indexOf("TOKEN_EXOIRED")>-1){if(n.maxRetryTimes=n.maxRetryTimes||5,n.failTimes=n.failTimes||0,n.H5Request&&++n.failTimes<n.maxRetryTimes)return t.__sequence([t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest]);n.maxRetryTimes>0&&(p(_,n.pageDomain,"*"),p(b,n.mainDomain,n.subDomain),p("_m_h5_tk_enc",n.mainDomain,n.subDomain)),e.retType=g.TOKEN_EXPIRED}}):void e()},d.prototype.__processRequestUrl=function(t){var n=this.params,o=this.options;if(o.hostSetting&&o.hostSetting[e.location.hostname]){var i=o.hostSetting[e.location.hostname];i.prefix&&(o.prefix=i.prefix),i.subDomain&&(o.subDomain=i.subDomain),i.mainDomain&&(o.mainDomain=i.mainDomain)}if(!0===o.H5Request){var r="//"+(o.prefix?o.prefix+".":"")+(o.subDomain?o.subDomain+".":"")+o.mainDomain+"/h5/"+n.api.toLowerCase()+"/"+n.v.toLowerCase()+"/",s=n.appKey||("waptest"===o.subDomain?"4272":"12574478"),u=(new Date).getTime(),c=a(o.token+"&"+u+"&"+s+"&"+n.data),l={jsv:"2.4.11",appKey:s,t:u,sign:c},p={data:n.data,ua:n.ua};Object.keys(n).forEach(function(e){void 0===l[e]&&void 0===p[e]&&"headers"!==e&&"ext_headers"!==e&&"ext_querys"!==e&&(l[e]=n[e])}),n.ext_querys&&Object.keys(n.ext_querys).forEach(function(e){l[e]=n.ext_querys[e]}),o.getJSONP?l.type="jsonp":o.getOriginalJSONP?l.type="originaljsonp":(o.getJSON||o.postJSON)&&(l.type="originaljson"),void 0!==n.valueType&&("original"===n.valueType?o.getJSONP||o.getOriginalJSONP?l.type="originaljsonp":(o.getJSON||o.postJSON)&&(l.type="originaljson"):"string"===n.valueType&&(o.getJSONP||o.getOriginalJSONP?l.type="jsonp":(o.getJSON||o.postJSON)&&(l.type="json"))),!0===o.useJsonpResultType&&"originaljson"===l.type&&delete l.type,o.dangerouslySetProtocol&&(r=o.dangerouslySetProtocol+":"+r),o.querystring=l,o.postdata=p,o.path=r}t()},d.prototype.__processUnitPrefix=function(e){e()};var S=0;d.prototype.__requestJSONP=function(e){function t(e){if(l&&clearTimeout(l),p.parentNode&&p.parentNode.removeChild(p),"TIMEOUT"===e)window[c]=function(){window[c]=void 0;try{delete window[c]}catch(e){}};else{window[c]=void 0;try{delete window[c]}catch(e){}}}var o=n(),s=this.params,a=this.options,u=s.timeout||2e4,c="mtopjsonp"+(s.jsonpIncPrefix||"")+ ++S,l=setTimeout(function(){e(a.timeoutErrMsg||"TIMEOUT::接口超时"),t("TIMEOUT")},u);a.querystring.callback=c;var p=document.createElement("script");return p.src=a.path+"?"+r(a.querystring)+"&"+r(a.postdata),p.async=!0,p.onerror=function(){t("ABORT"),e(a.abortErrMsg||"ABORT::接口异常退出")},window[c]=function(){a.results=Array.prototype.slice.call(arguments),t(),o.resolve()},i(p),o.promise},d.prototype.__requestJSON=function(t){function o(e){p&&clearTimeout(p),"TIMEOUT"===e&&u.abort()}var i=n(),s=this.params,a=this.options,u=new e.XMLHttpRequest,c=s.timeout||2e4,p=setTimeout(function(){t(a.timeoutErrMsg||"TIMEOUT::接口超时"),o("TIMEOUT")},c);a.CDR&&l(_)&&(a.querystring.c=decodeURIComponent(l(_))),u.onreadystatechange=function(){if(4==u.readyState){var e,n,r=u.status;if(r>=200&&300>r||304==r){o(),e=u.responseText,n=u.getAllResponseHeaders()||"";try{e=/^\s*$/.test(e)?{}:JSON.parse(e),e.responseHeaders=n,a.results=[e],i.resolve()}catch(e){t("PARSE_JSON_ERROR::解析JSON失败")}}else o("ABORT"),t(a.abortErrMsg||"ABORT::接口异常退出")}};var d,f,h=a.path+"?"+r(a.querystring);a.getJSON?(d="GET",h+="&"+r(a.postdata)):a.postJSON&&(d="POST",f=r(a.postdata)),u.open(d,h,!0),u.withCredentials=!0,u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Content-type","application/x-www-form-urlencoded");var m=s.ext_headers||s.headers;if(m)for(var v in m)u.setRequestHeader(v,m[v]);return u.send(f),i.promise},d.prototype.__requestWindVane=function(e){function o(e){s.results=[e],i.resolve()}var i=n(),r=this.params,s=this.options,a=r.data,u=r.api,c=r.v,l=s.postJSON?1:0,p=s.getJSON||s.postJSON||s.getOriginalJSONP?"originaljson":"";void 0!==r.valueType&&("original"===r.valueType?p="originaljson":"string"===r.valueType&&(p="")),!0===s.useJsonpResultType&&(p="");var d,f,h="https"===location.protocol?1:0,m=r.isSec||0,v=r.sessionOption||"AutoLoginOnly",g=r.ecode||0,w=r.ext_headers||{},y=r.ext_querys||{};w.referer=location.href,f=void 0!==r.timer?parseInt(r.timer):void 0!==r.timeout?parseInt(r.timeout):2e4,d=2*f,!0===r.needLogin&&void 0===r.sessionOption&&(v="AutoLoginAndManualLogin"),void 0!==r.secType&&void 0===r.isSec&&(m=r.secType);var _={api:u,v:c,post:String(l),type:p,isHttps:String(h),ecode:String(g),isSec:String(m),param:JSON.parse(a),timer:f,sessionOption:v,ext_headers:w,ext_querys:y};return r.ttid&&!0===s.dangerouslySetWVTtid&&(_.ttid=r.ttid),Object.assign&&r.dangerouslySetWindvaneParams&&Object.assign(_,r.dangerouslySetWindvaneParams),t.windvane.call("MtopWVPlugin","send",_,o,o,d),i.promise},d.prototype.__requestAlipay=function(t){function o(e){s.results=[e],i.resolve()}var i=n(),r=this.params,s=this.options,a={apiName:r.api,apiVersion:r.v,needEcodeSign:"1"===String(r.ecode),usePost:!!s.postJSON};return u(r.data)||(r.data=JSON.parse(r.data)),a.data=r.data,r.ttid&&!0===s.dangerouslySetWVTtid&&(a.ttid=r.ttid),(s.getJSON||s.postJSON||s.getOriginalJSONP)&&(a.type="originaljson"),void 0!==r.valueType&&("original"===r.valueType?a.type="originaljson":"string"===r.valueType&&delete a.type),!0===s.useJsonpResultType&&delete a.type,Object.assign&&r.dangerouslySetAlipayParams&&Object.assign(a,r.dangerouslySetAlipayParams),e.AlipayJSBridge.call("mtop",a,o),i.promise},d.prototype.__processRequest=function(e,t){var n=this;return h.then(function(){var e=n.options;if(e.H5Request&&(e.getJSONP||e.getOriginalJSONP))return n.__requestJSONP(t);if(e.H5Request&&(e.getJSON||e.postJSON))return n.__requestJSON(t);if(e.WindVaneRequest)return w?n.__requestAlipay(t):n.__requestWindVane(t);throw new Error("UNEXCEPT_REQUEST::错误的请求类型")}).then(e).then(function(){var e=n.options,t=(n.params,e.results[0]),o=t&&t.ret||[];t.ret=o,o instanceof Array&&(o=o.join(","));var i=t.c;e.CDR&&i&&c(_,i,{domain:e.pageDomain,path:"/"}),o.indexOf("SUCCESS")>-1?t.retType=g.SUCCESS:t.retType=g.ERROR,e.retJson=t})},d.prototype.__sequence=function(e){function t(e){if(e instanceof Array)e.forEach(t);else{var s,a=n(),u=n();i.push(function(){return a=n(),s=e.call(o,function(e){return a.resolve(e),u.promise},function(e){return a.reject(e),u.promise}),s&&(s=s.catch(function(e){a.reject(e)})),a.promise}),r.push(function(e){return u.resolve(e),s})}}var o=this,i=[],r=[];e.forEach(t);for(var s,a=h;s=i.shift();)a=a.then(s);for(;s=r.pop();)a=a.then(s);return a};var E=function(e){e()},O=function(e){e()};d.prototype.request=function(n){var i=this;if(this.options=o(n||{},m),!f){var r="当前浏览器不支持Promise，请在windows对象上挂载Promise对象可参考（http://gitlab.alibaba-inc.com/mtb/lib-es6polyfill/tree/master）中的解决方案";throw t.mtop={ERROR:r},new Error(r)}var a=f.resolve([E,O]).then(function(e){var t=e[0],n=e[1];return i.__sequence([t,i.__processRequestMethod,i.__processRequestType,i.__processToken,i.__processRequestUrl,i.middlewares,i.__processRequest,n])}).then(function(){var e=i.options.retJson;return e.retType!==g.SUCCESS?f.reject(e):i.options.successCallback?void i.options.successCallback(e):f.resolve(e)}).catch(function(e){var t;return e instanceof Error?(console.error(e.stack),t={ret:[e.message],stack:[e.stack],retJson:g.ERROR}):t="string"==typeof e?{ret:[e],retJson:g.ERROR}:void 0!==e?e:i.options.retJson,i.options.failureCallback?void i.options.failureCallback(t):f.reject(t)});return this.__processRequestType(),i.options.H5Request&&(i.constructor.__firstProcessor||(i.constructor.__firstProcessor=a),E=function(e){i.constructor.__firstProcessor.then(e).catch(e)}),("get"===this.params.type&&"json"===this.params.dataType||"post"===this.params.type)&&(n.pageDomain=n.pageDomain||s(e.location.hostname),n.mainDomain!==n.pageDomain&&(n.maxRetryTimes=4,n.CDR=!0)),a},t.mtop=function(e){return new d(e)},t.mtop.request=function(e,t,n){var o={H5Request:e.H5Request,WindVaneRequest:e.WindVaneRequest,LoginRequest:e.LoginRequest,AntiCreep:e.AntiCreep,AntiFlood:e.AntiFlood,successCallback:t,failureCallback:n||t};return new d(e).request(o)},t.mtop.H5Request=function(e,t,n){var o={H5Request:!0,successCallback:t,failureCallback:n||t};return new d(e).request(o)},t.mtop.middlewares=v,t.mtop.config=m,t.mtop.RESPONSE_TYPE=g,t.mtop.CLASS=d}(window,window.lib||(window.lib={})),function(e,t){function n(e){return e.preventDefault(),!1}function o(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}function i(t,o){var i=this,r=e.dpr||1,s=document.createElement("div"),a=document.documentElement.getBoundingClientRect(),u=Math.max(a.width,window.innerWidth)/r,c=Math.max(a.height,window.innerHeight)/r;s.style.cssText=["-webkit-transform:scale("+r+") translateZ(0)","-ms-transform:scale("+r+") translateZ(0)","transform:scale("+r+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+u+"px","height:"+c+"px","z-index:999999","position:"+(u>800?"fixed":"absolute"),"left:0","top:0px","background:"+(u>800?"rgba(0,0,0,.5)":"#FFF"),"display:none"].join(";");var l=document.createElement("div");l.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),l.innerText=t;var p=document.createElement("a");p.style.cssText=["display:block","position:absolute","right:0","top:0","height:52px","line-height:52px","padding:0 20px","color:#999"].join(";"),p.innerText="关闭";var d=document.createElement("iframe");d.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),u>800&&(l.style.cssText=["width:370px","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:"+(u/2-185)+"px","top:40px","font-size:16px","font-weight:bold","color:#333"].join(";"),d.style.cssText=["position:absolute","top:92px","left:"+(u/2-185)+"px","width:370px","height:480px","border:0","background:#FFF","overflow:hidden"].join(";")),l.appendChild(p),s.appendChild(l),s.appendChild(d),s.className="J_MIDDLEWARE_FRAME_WIDGET",document.body.appendChild(s),d.src=o,p.addEventListener("click",function(){i.hide();var e=document.createEvent("HTMLEvents");e.initEvent("close",!1,!1),s.dispatchEvent(e)},!1),this.addEventListener=function(){s.addEventListener.apply(s,arguments)},this.removeEventListener=function(){s.removeEventListener.apply(s,arguments)},this.show=function(){document.addEventListener("touchmove",n,!1),s.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",n),window.scrollTo(0,-a.top),s.parentNode&&s.parentNode.removeChild(s)}}function r(e){var n=this,o=this.options,i=this.params;return e().then(function(){var e=o.retJson,r=e.ret,s=navigator.userAgent.toLowerCase(),a=s.indexOf("safari")>-1&&s.indexOf("chrome")<0&&s.indexOf("qqbrowser")<0;if(r instanceof Array&&(r=r.join(",")),(r.indexOf("SESSION_EXPIRED")>-1||r.indexOf("SID_INVALID")>-1||r.indexOf("AUTH_REJECT")>-1||r.indexOf("NEED_LOGIN")>-1)&&(e.retType=p.SESSION_EXPIRED,!o.WindVaneRequest&&(!0===l.LoginRequest||!0===o.LoginRequest||!0===i.needLogin))){if(!t.login)throw new Error("LOGIN_NOT_FOUND::缺少lib.login");if(!0!==o.safariGoLogin||!a||"taobao.com"===o.pageDomain)return t.login.goLoginAsync().then(function(e){return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])}).catch(function(e){throw"CANCEL"===e?new Error("LOGIN_CANCEL::用户取消登录"):new Error("LOGIN_FAILURE::用户登录失败")});t.login.goLogin()}})}function s(e){var t=this.options;return this.params,!0!==t.H5Request||!0!==l.AntiFlood&&!0!==t.AntiFlood?void e():e().then(function(){var e=t.retJson,n=e.ret;n instanceof Array&&(n=n.join(",")),n.indexOf("FAIL_SYS_USER_VALIDATE")>-1&&e.data.url&&(t.AntiFloodReferer?location.href=e.data.url.replace(/(http_referer=).+/,"$1"+t.AntiFloodReferer):location.href=e.data.url)})}function a(t){var n=this,r=this.options,s=this.params;return!0!==s.forceAntiCreep&&!0!==r.H5Request||!0!==l.AntiCreep&&!0!==r.AntiCreep?void t():t().then(function(){var t=r.retJson,a=t.ret;if(a instanceof Array&&(a=a.join(",")),a.indexOf("RGV587_ERROR::SM")>-1&&t.data.url){var c="_m_h5_smt",l=o(c),p=!1;if(!0===r.saveAntiCreepToken&&l){l=JSON.parse(l);for(var d in l)s[d]&&(p=!0)}if(!0===r.saveAntiCreepToken&&l&&!p){for(var d in l)s[d]=l[d];return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])}return new u(function(o,a){function u(){d.removeEventListener("close",u),e.removeEventListener("message",l),a("USER_INPUT_CANCEL::用户取消输入")}function l(t){var i;try{i=JSON.parse(t.data)||{}}catch(e){}if(i&&"child"===i.type){d.removeEventListener("close",u),e.removeEventListener("message",l),d.hide();var p;try{"string"==typeof(p=JSON.parse(decodeURIComponent(i.content)))&&(p=JSON.parse(p));for(var f in p)s[f]=p[f];!0===r.saveAntiCreepToken?(document.cookie=c+"="+JSON.stringify(p)+";",e.location.reload()):n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest]).then(o)}catch(e){
a("USER_INPUT_FAILURE::用户输入失败")}}}var p=t.data.url,d=new i("",p);d.addEventListener("close",u,!1),e.addEventListener("message",l,!1),d.show()})}})}if(!t||!t.mtop||t.mtop.ERROR)throw new Error("Mtop 初始化失败！请参考Mtop文档http://gitlab.alibaba-inc.com/mtb/lib-mtop");var u=e.Promise,c=t.mtop.CLASS,l=t.mtop.config,p=t.mtop.RESPONSE_TYPE;t.mtop.middlewares.push(r),t.mtop.loginRequest=function(e,t,n){var o={LoginRequest:!0,H5Request:!0,successCallback:t,failureCallback:n||t};return new c(e).request(o)},t.mtop.antiFloodRequest=function(e,t,n){var o={AntiFlood:!0,successCallback:t,failureCallback:n||t};return new c(e).request(o)},t.mtop.middlewares.push(s),t.mtop.antiCreepRequest=function(e,t,n){var o={AntiCreep:!0,successCallback:t,failureCallback:n||t};return new c(e).request(o)},t.mtop.middlewares.push(a)}(window,window.lib||(window.lib={})),function(e,t){function n(e){Object.defineProperty(this,"val",{value:e.toString(),enumerable:!0}),this.gt=function(e){return n.compare(this,e)>0},this.gte=function(e){return n.compare(this,e)>=0},this.lt=function(e){return n.compare(this,e)<0},this.lte=function(e){return n.compare(this,e)<=0},this.eq=function(e){return 0===n.compare(this,e)}}t.env=t.env||{},n.prototype.toString=function(){return this.val},n.prototype.valueOf=function(){for(var e=this.val.split("."),t=[],n=0;n<e.length;n++){var o=parseInt(e[n],10);isNaN(o)&&(o=0);var i=o.toString();i.length<5&&(i=Array(6-i.length).join("0")+i),t.push(i),1===t.length&&t.push(".")}return parseFloat(t.join(""))},n.compare=function(e,t){e=e.toString().split("."),t=t.toString().split(".");for(var n=0;n<e.length||n<t.length;n++){var o=parseInt(e[n],10),i=parseInt(t[n],10);if(window.isNaN(o)&&(o=0),window.isNaN(i)&&(i=0),i>o)return-1;if(o>i)return 1}return 0},t.version=function(e){return new n(e)}}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n=e.location.search.replace(/^\?/,"");if(t.env.params={},n)for(var o=n.split("&"),i=0;i<o.length;i++){o[i]=o[i].split("=");try{t.env.params[o[i][0]]=decodeURIComponent(o[i][1])}catch(e){t.env.params[o[i][0]]=o[i][1]}}}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n,o=e.navigator.userAgent;if(n=o.match(/Windows\sPhone\s(?:OS\s)?([\d\.]+)/))t.env.os={name:"Windows Phone",isWindowsPhone:!0,version:n[1]};else if(o.match(/Safari/)&&(n=o.match(/Android[\s\/]([\d\.]+)/)))t.env.os={version:n[1]},o.match(/Mobile\s+Safari/)?(t.env.os.name="Android",t.env.os.isAndroid=!0):(t.env.os.name="AndroidPad",t.env.os.isAndroidPad=!0);else if(n=o.match(/(iPhone|iPad|iPod)/)){var i=n[1];n=o.match(/OS ([\d_\.]+) like Mac OS X/),t.env.os={name:i,isIPhone:"iPhone"===i||"iPod"===i,isIPad:"iPad"===i,isIOS:!0,version:n[1].split("_").join(".")}}else t.env.os={name:"unknown",version:"0.0.0"};t.version&&(t.env.os.version=t.version(t.env.os.version))}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n,o=e.navigator.userAgent;(n=o.match(/(?:UCWEB|UCBrowser\/)([\d\.]+)/))?t.env.browser={name:"UC",isUC:!0,version:n[1]}:(n=o.match(/MQQBrowser\/([\d\.]+)/))?t.env.browser={name:"QQ",isQQ:!0,version:n[1]}:(n=o.match(/Firefox\/([\d\.]+)/))?t.env.browser={name:"Firefox",isFirefox:!0,version:n[1]}:(n=o.match(/MSIE\s([\d\.]+)/))||(n=o.match(/IEMobile\/([\d\.]+)/))?(t.env.browser={version:n[1]},o.match(/IEMobile/)?(t.env.browser.name="IEMobile",t.env.browser.isIEMobile=!0):(t.env.browser.name="IE",t.env.browser.isIE=!0),o.match(/Android|iPhone/)&&(t.env.browser.isIELikeWebkit=!0)):(n=o.match(/(?:Chrome|CriOS)\/([\d\.]+)/))?(t.env.browser={name:"Chrome",isChrome:!0,version:n[1]},o.match(/Version\/[\d+\.]+\s*Chrome/)&&(t.env.browser.name="Chrome Webview",t.env.browser.isWebview=!0)):o.match(/Safari/)&&(n=o.match(/Android[\s\/]([\d\.]+)/))?t.env.browser={name:"Android",isAndroid:!0,version:n[1]}:o.match(/iPhone|iPad|iPod/)?o.match(/Safari/)?(n=o.match(/Version\/([\d\.]+)/),t.env.browser={name:"Safari",isSafari:!0,version:n[1]}):(n=o.match(/OS ([\d_\.]+) like Mac OS X/),t.env.browser={name:"iOS Webview",isWebview:!0,version:n[1].replace(/\_/g,".")}):t.env.browser={name:"unknown",version:"0.0.0"},t.version&&(t.env.browser.version=t.version(t.env.browser.version))}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n=e.navigator.userAgent;n.match(/Weibo/i)?t.env.thirdapp={appname:"Weibo",isWeibo:!0}:n.match(/MicroMessenger/i)?t.env.thirdapp={appname:"Weixin",isWeixin:!0}:t.env.thirdapp=!1}(window,window.lib||(window.lib={})),function(e,t){t.env=t.env||{};var n,o,i=e.navigator.userAgent;(o=i.match(/WindVane[\/\s]([\d\.\_]+)/))&&(n=o[1]);var r=!1,s="",a="",u="",c=!1,l="";(o=i.match(/AliApp\(([A-Z\-]+)\/([\d\.]+)\)/i))&&(r=!0,s=o[1],u=o[2],a=s.indexOf("-PD")>0?t.env.os.isIOS?"iPad":t.env.os.isAndroid?"AndroidPad":t.env.os.name:t.env.os.name),!s&&i.indexOf("TBIOS")>0&&(s="TB"),(o=i.match(/PopLayer\/([\d\.]+)/i))&&(c=!0,l=o[1]),t.env.aliapp=!!r&&{windvane:t.version(n||"0.0.0"),appname:s||"unkown",version:t.version(u||"0.0.0"),platform:a||t.env.os.name,poplayer:c||!1,poplayerVersion:t.version(l||"0.0.0")},t.env.taobaoApp=t.env.aliapp}(window,window.lib||(window.lib={})),function(e,t){function n(e){if(!r.paused)if(r.isSupportNative){var t=e.param.playIdentifier;t&&t.toString()!==p.toString()||(r.paused=!0,r.onended&&r.onended(),console.log("endedId:"+t))}else r.paused=!0,r.onended&&r.onended(),console.log("ended")}function o(e){r.error=!0,r.pause(),r.onerror&&r.onerror(),console.log("error")}function i(e,t){return e=e.toString(),new Array(t+1-e.length).join("0")+e}var r=t.audio||(t.audio={}),s=e.document,a=e.WindVane,u=t.env.taobaoApp,c=new Audio,l=1,p=0,d={};r.isSupportNative=!1,u&&a&&(r.isSupportNative=u.version&&u.version.gte("4.0.0")),c.autoplay=!1,c.addEventListener("ended",n,!1),c.addEventListener("error",o,!1),s.addEventListener("AUDIO.IDLE",n,!1),r.paused=!0,r.play=function(e,t,n){if(1===arguments.length?"string"==typeof arguments[0]?this.src=arguments[0]:"function"==typeof arguments[0]&&(this.onended=t):2===arguments.length?"string"==typeof arguments[0]?(this.src=arguments[0],this.onended=arguments[1]):"function"==typeof arguments[0]&&(this.onended=arguments[0],this.onerror=arguments[1]):3===arguments.length&&(this.src=e,this.onended=t,this.onerror=n),this.error=!1,this.src){if(this.paused=!1,this.isSupportNative){if(!(p=d[this.src])){var r=Date.now()%1e3;d[this.src]=p="1"+i(r,3)+i(l,4),l=++l%1e4}console.log("playedId:"+p),a.call("H5AudioPlayer","play",{voiceUrl:this.src,playIdentifier:p},function(e){console.log("success to play")},function(e){console.log("fail to play"),o()})}else c.paused||(c.pause(),c.currentTime=0),c.src=this.src,c.play();console.log("play")}else o()},r.pause=function(e){(!this.paused||e)&&(this.paused=!0,this.isSupportNative?a.call("H5AudioPlayer","stop",{voiceUrl:this.src||""},function(e){console.log("success to stop")},function(e){console.log("fail to stop")}):(c.pause(),r.error||(c.currentTime=0)),console.log("paused"))}}(window,window.lib||(window.lib={})),function(e,t){var n="data-img",o="data-size",i=/_.webp$/,r=new RegExp("_(\\d+x\\d+(?:xz|xc)?|sum|m|b)((?:c[xy]\\d+i)?(?:co0)?)?([qQ]\\d+)?([sS]\\d+)?(g)?(\\.jpg)?(_\\.webp)?$"),s=e.document,a=/(^https?:)?\/\/.*(?:alicdn|taobaocdn|taobao)\.(com|net)\/.*(?:\.(jpg|png|gif|jpeg|webp))?$/gi,u={extend:function(e,t){for(var n in t)e[n]=t[n]},filter:function(e){return e.filter(function(e){return!!e})},addEvent:function(e,t,n){e.addEventListener(t,n,!1)},removeEvent:function(e,t,n){e.removeEventListener(t,n,!1)},getTime:function(){return Date.now?Date.now():(new Date).getTime()},isJsonObject:function(e){return"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype},uaInTaobaoApp:function(){return null!=navigator.userAgent.match(/WindVane/i)},getParamVal:function(t){var n=e.location.search.slice(1),o={};if(""!==n)for(var i,r=n.split("&"),s=0,a=r.length;a>s;s++)i=r[s].split("="),o[i[0]]=i[1]||"";return t?o[t]:o},getQ:function(e){var t=e||this.getParamVal("getStatus"),n="";switch(t){case"false":n="q90";break;case"true":n="q75";break;case"_noq":n="";break;default:n=t}return n},fetchVersion:function(){var e=navigator.appVersion.match(/(iPhone\sOS)\s([\d_]+)/),t=e&&!0||!1,n=t&&e[2].split("_");n=n&&parseFloat(n.length>1?n.splice(0,2).join("."):n[0],10);var o=t&&6>n;return this.fetchVersion=function(){return o},o},getOffset:function(t,n){if(t){if(n||(n={x:0,y:0}),t!=e)var o=t.getBoundingClientRect(),i=o.left,r=o.top,s=o.right,a=o.bottom;else i=0,r=0,s=i+t.innerWidth,a=r+t.innerHeight;return{left:i,top:r,right:s+n.x,bottom:a+n.y}}},compare:function(e,t){return t.right>e.left&&(t.left,e.right),t.bottom>e.top&&t.top<e.bottom},setImgSrc:function(e,t,n,o){if(e){if(null==e.match(a))return e;(e.lastIndexOf(".gif")>=0||e.indexOf(".gif_")>=0)&&(n=""),n=!e.match(/_q(\d+)\.(?:jpg|png|gif)/)&&n?n:"",t=!e.match(/_(\d+)-(\d+)\.(?:jpg|png|gif)/)&&t?t:"";var s=o?"_.webp":"",u=e,c=u.match(r),l=u.match(i);return c?u=u.replace(c,"_"+(c[1]||t)+(c[2]||"")+(c[1]||n)+(c[4]||"")+(c[5]||"")+(c[6]||"")+(c[7]||s)):l&&(t||n)?u=u.replace(l,"_"+t+n+".jpg_.webp"):u+=t||n?"_"+t+n+".jpg"+s:s,u}},clearImgSrc:function(e){var t;if(e&&"string"==typeof e)return t=e.match(r),t?e.replace(r,t[7]||""):e}},c=function(t,n){t||n?u.isJsonObject(t)&&(n=t,t=e):t=e;var o="string"==typeof t?s.querySelector(t):t;o&&(this.Container=o,this.reset(n||{}),this.attachMethod(),this.getItem(),this.filterItem())};c.prototype={reset:function(t){var n={lazyHeight:400,lazyWidth:0,lazyClass:"lb-lazy",definition:!1,autoDestroy:!0,q:""},o=u.extend,i=this.defaultAttr;i&&o(t,i),o(n,t);var r=n.q;"Boolean"==typeof r&&(r=r.toString()),n.q=u.getQ(r);var s=e.devicePixelRatio;n.definition=n.definition&&s&&s>1||!1;var a=n.size;a&&(a="object"==typeof a?a[s]||a.default:a),n.size=a||"";var c=n.lazyClass;n.lazyClass="."!==c.charAt(0)?c:c.slice(1),n.lazyClassReg=new RegExp("(^|\\s)"+n.lazyClass+"(\\s|$)"),this.defaultAttr=t,this.attr=n},get:function(e){return e?this.attr[e]:null},fireEvent:function(e){var t=this;e&&t.reset(e),t.getItem(),t.filterItem()},handleEvent:function(e){var t=e.type;"scroll"===t?this.filterItem():"touchstart"===t?this.tstart():"touchend"===t&&this.tend()},tstart:function(){this._touchLazy={sy:e.pageYOffset,time:u.getTime()},this._timerPhone&&clearTimeout(this._timerPhone)},tend:function(){var t=this,n=t._touchLazy;if(Math.abs(e.pageYOffset-n.sy)>5){var o=u.getTime()-n.time;t._timerPhone=setTimeout(function(){t.filterItem(),t.touchLazy={},clearTimeout(t._timerPhone),t._timerPhone=null},o>100?0:10)}},attachMethod:function(){var t=u.addEvent;t(e,"scroll",this),u.fetchVersion()&&(t(s,"touchstart",this),t(s,"touchend",this))},destroy:function(){var t=u.removeEvent;t(e,"scroll",this),u.fetchVersion()&&(t(s,"touchstart",this),t(s,"touchend",this))},getItem:function(){var t=this,n=t.Container,o=t.itemList;if(o)for(var i=0,r=o.length;r>i;i++)o[i]&&(o[i].onerror=o[i].onload=null);n=n===e?s:n;for(var a=n.querySelectorAll("."+t.get("lazyClass")),u=[],i=0,r=a.length;r>i;i++)u.push(a[i]);t.itemList=u},filterItem:function(){var t=this,n=u,o=(t.Container,{x:t.get("lazyWidth"),y:t.get("lazyHeight")}),i=t.itemList,r=n.filter(i);if(r&&r.length)for(var s=0,a=i.length;a>s;s++)i[s]&&n.compare(n.getOffset(e,o),n.getOffset(i[s]))&&t.fetchItem(i[s],s);else t.get("autoDestroy")&&t.destroy()},fetchItem:function(e,t){var i=this,r=e.getAttribute(n),s=e.getAttribute(o),a=i.get("q");r&&(i.get("definition")&&(s||(s=i.get("size"))),r=u.setImgSrc(r,s,a),e.removeAttribute(n),e.removeAttribute(o),"IMG"===e.tagName?e.src=r:e.style.backgroundImage="url("+r+")",e.onload||(e.onload=function(){i.loadItem(this,t)},e.onerror=function(){i.errorItem(this,t)}))},loadItem:function(e,t){this.removeItemAttr(e,t),this.get("loadCallback")&&this.get("loadCallback").call(e)},errorItem:function(e,t){this.removeItemAttr(e,t),this.get("errorCallback")&&this.get("errorCallback").call(e)},removeItemAttr:function(e,t){var n=this;e.className=e.className.replace(n.get("lazyClassReg")," "),e.setAttribute("height",""),e.onerror=e.onload=null,n.itemList[t]=null}},c.prototype.constructor=c,t.lazyload=function(e,t){return new c(e,t)},t.lazyload.setImgSrc=u.setImgSrc,t.lazyload.clearImgSrc=u.clearImgSrc,t.lazyload.getNetWork=function(t){var n=e.WindVane;u.uaInTaobaoApp()?n&&n.call("TBWeakNetStatus","getStatus","",function(e){t(e.WeakNetStatus)},function(e){t()},200):t()}}(window,window.lib||(window.lib={}));